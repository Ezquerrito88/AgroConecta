<nav class="login-nav">
    <div class="nav-container">
        <div class="logo-brand">
            <img src="img/logo/logo.png" alt="Logo" class="logo-img">
            <div class="brand-text">
                <span class="brand-name">AgroConecta</span>
                <span class="brand-slogan">Sabores del Campo</span>
            </div>
        </div>
        <a href="/" class="btn-back">
            <i class="fas fa-arrow-left"></i> Volver
        </a>
    </div>
</nav>

<div class="login-wrapper">
    <div class="login-card">
        <div class="login-header">

            <div class="main-avatar-square">
                <div class="user-silhouette">
                    <div class="head"></div>
                    <div class="body"></div>
                </div>
            </div>
            <h2>Iniciar SesiÃ³n</h2>
            <p>Accede a tu cuenta</p>
        </div>

        <div class="profile-tabs">
            <div class="slider" [class.slide-right]="perfilSeleccionado === 'agricultor'"></div>

            <button type="button" class="tab" [class.active]="perfilSeleccionado === 'comprador'"
                (click)="seleccionarPerfil('comprador')">
                <span class="emoji-icon">ðŸ‘¤</span>
                <span class="tab-text">Comprador</span>
            </button>

            <button type="button" class="tab" [class.active]="perfilSeleccionado === 'agricultor'"
                (click)="seleccionarPerfil('agricultor')">
                <span class="emoji-icon">ðŸšœ</span>
                <span class="tab-text">Agricultor</span>
            </button>
        </div>

        <form (submit)="onLogin($event)" class="login-form">

            <div *ngIf="errorMessage" class="error-message">
                <i class="fa-solid fa-circle-exclamation"></i> {{ errorMessage }}
            </div>

            <div class="input-group">
                <label>Email</label>
                <input type="email" name="email" placeholder="pepe@gmail.com" [(ngModel)]="loginData.email" required>
            </div>

            <div class="input-group">
                <label>ContraseÃ±a</label>
                <div class="password-wrapper">
                    <input [type]="showPassword ? 'text' : 'password'" name="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                        [(ngModel)]="loginData.password" required>

                    <i class="fa-regular password-toggle-icon" [ngClass]="showPassword ? 'fa-eye-slash' : 'fa-eye'"
                        (click)="showPassword = !showPassword">
                    </i>
                </div>
            </div>

            <div class="form-options">
                <label class="remember-me">
                    <input type="checkbox"> Recordarme
                </label>
                <a href="#" class="forgot-password">Â¿Olvidaste tu contraseÃ±a?</a>
            </div>

            <button type="submit" class="btn-login" [disabled]="isLoading">
                <span *ngIf="!isLoading">Iniciar SesiÃ³n</span>
                <div *ngIf="isLoading" class="spinner"></div>
            </button>
        </form>

        <div class="divider">
            <span>o continÃºa con</span>
        </div>

        <div class="social-login">
            <button type="button" class="btn-social google" (click)="loginWithGoogle()">
                <img src="https://upload.wikimedia.org/wikipedia/commons/c/c1/Google_%22G%22_logo.svg" alt="G">
                <span>Google</span>
            </button>

            <button type="button" class="btn-social apple">
                <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg" alt="Apple">
                <span>Apple</span>
            </button>

        </div>


        <div class="registration-links">
            <button class="btn-link btn-blue" routerLink="/registro" [queryParams]="{ role: 'buyer' }">
                Crear cuenta de comprador
            </button>

            <button class="btn-link btn-orange" routerLink="/registro" [queryParams]="{ role: 'farmer' }">
                Registrarse como agricultor
            </button>
        </div>
    </div>
</div>